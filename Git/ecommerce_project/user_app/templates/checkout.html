{% extends 'main_base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'user/css/checkout_styles.css' %}" />
{% endblock %}

{% block main_content %}
  {% block page_header %}
    <div class="page-header text-center" style="background-image: url('{% static 'user/assets/images/page-header-bg.jpg' %}')">
      <div class="container">
        <h1 class="page-title">Checkout<span>Shop</span></h1>
      </div>
    </div>
  {% endblock %}

  {% block breadcrumbs %}
    <nav aria-label="breadcrumb" class="breadcrumb-nav">
      <div class="container">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{% url 'index_page' %}">Home</a>
          </li>
          <li class="breadcrumb-item">
            <a href="{% url 'shop_page_view' %}">Shop</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">Checkout</li>
        </ol>
      </div>
    </nav>
  {% endblock %}

  <div class="page-content">
    <div class="checkout">
      <div class="container">
        <div class="row">
          <form action="" method="post">
            <div class="col-lg-9">
              <div class="delivery-address-container">
                <h2 class="address-heading">Delivery Address</h2>
                <h6 class="address-select-label">Select from the addresses</h6>
                <div class="address-list">
                  {% for addr in addresses %}
                    <div class="address-item">
                      <input type="radio" id="address-{{ addr.id }}" name="delivery_address" value="{{ addr.id }}" class="custom-radio-input" />
                      <label for="address-{{ addr.id }}" class="custom-radio-label">
                        <span class="address-name">{{ addr.name }} : {{ addr.phone_number }}</span><br />
                        <span class="address-details">{{ addr.street_address }}, {{ addr.city }}, {{ addr.state }}, {{ addr.country }}, {{ addr.pin_code }}</span>
                      </label>
                    </div>
                  {% endfor %}
                </div>
              </div>
            </div>

            <aside class="col-lg-3">
              <div class="summary">
                <h3 class="summary-title">Your Order</h3>

                <table class="table table-summary">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Total</th>
                    </tr>
                  </thead>

                  <tbody>
                    {% for item in cart_items %}
                      <tr>
                        <td>
                          <a href="#">{{ item.product.product_color_image.products.name }}</a>
                        </td>
                        <td>₹{{ item.product.product_color_image.price }}.00</td>
                      </tr>
                    {% endfor %}

                    <tr class="summary-subtotal">
                      <td>Subtotal:</td>
                      <td>₹ {{ subtotal }}.00</td>
                    </tr>
                    <tr>
                      <td>Shipping:</td>
                      <td>₹ {{ shipping_charge }}.00</td>
                    </tr>
                    <tr class="summary-total">
                      <td>Total:</td>
                      <td>₹ {{ total_charge }}.00</td>
                    </tr>
                  </tbody>
                </table>

                <div class="accordion-summary" id="accordion-payment">
                  <div class="card">
                    <div class="card-header" id="heading-3">
                      <h2 class="card-title">
                        <label>
                          <input type="radio" name="payment_method" value="cash_on_delivery" />
                          <span class="payment-method"><i class="fas fa-money-bill"></i></span>
                          Cash on delivery
                        </label>
                      </h2>
                    </div>
                  </div>

                  {% comment %} <div class="card">
                    <div class="card-header" id="heading-4">
                      <h2 class="card-title">
                        <label>
                          <input type="radio" name="payment_method" value="paypal" />
                          <span class="payment-method"><i class="fab fa-paypal"></i></span>
                          PayPal
                        </label>
                      </h2>
                    </div>
                  </div> {% endcomment %}
                </div>

                <button type="submit" class="btn btn-outline-primary-2 btn-order btn-block">
                  <span class="btn-text">Place Order</span>
                  <span class="btn-hover-text">Proceed to Checkout</span>
                </button>
              </div>
            </aside>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block custom_scripts %}
  <script src="{% static 'user/assets/js/jquery.min.js' %}"></script>
  <script src="{% static 'user/assets/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'user/assets/js/jquery.hoverIntent.min.js' %}"></script>
  <script src="{% static 'user/assets/js/jquery.waypoints.min.js' %}"></script>
  <script src="{% static 'user/assets/js/superfish.min.js' %}"></script>
  <script src="{% static 'user/assets/js/owl.carousel.min.js' %}"></script>
  <script src="{% static 'user/assets/js/main.js' %}"></script>
{% endblock %}
