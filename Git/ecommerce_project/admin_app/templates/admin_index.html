{% extends 'admin_base.html' %}

{% load static %}

{% block custom_css %}
  <link rel="shortcut icon" href="{% static 'images/Sneakerheads.png' %}" />
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-md-12 grid-margin">
      <div class="row">
        <div class="col-12 col-xl-8 mb-4 mb-xl-0">
          <h3 class="font-weight-bold">Hello {{ user.username }} {{ user.last_name }}</h3>
        </div>
        <div class="col-12 col-xl-4">
          <div class="justify-content-end d-flex">
            <div class="dropdown flex-md-grow-1 flex-xl-grow-0">
               <span> {{ today }} </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 grid-margin transparent">
      <div class="row">
        <div class="col-12 col-sm-3 mb-4 stretch-card transparent">
          <div class="card card-tale pb-2">
            <div class="card-body">
              <p class="mb-4">Todayâ€™s Orders</p>
              <p class="fs-30 mb-2"> {{ todays_order }} </p>
              <p> {{ todays_order_vs_order_in_five_days }}% (5 days)</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-3 mb-4 stretch-card transparent">
          <div class="card card-dark-blue">
            <div class="card-body">
              <p class="mb-4">Total Orders</p>
              <p class="fs-30 mb-2"> {{ total_orders }} </p>
              <p>{{ increase_of_order_in_five_days }}% (5 days)</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-3 mb-4 stretch-card transparent">
          <div class="card card-light-blue pb-0">
            <div class="card-body">
              <p class="mb-4">Number of Products</p>
              <p class="fs-30 mb-2"> {{ total_products }} </p>
              <p>{{ increase_of_products_in_five_days }}% (5 days)</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-3 mb-4 stretch-card transparent">
          <div class="card card-light-danger">
            <div class="card-body">
              <p class="mb-4">Number of Customers</p>
              <p class="fs-30 mb-2"> {{ total_customers }} </p>
              <p>{{ increase_of_customer_in_five_days }}% (5 days)</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="container sales-report-container">
      <div class="row">
        <div class="col-md-12">
          <div class="sales-report-section">
            <h2>Sales Report</h2>
            <form method="post" class="update-report-form">
              {% csrf_token %}
              <button type="submit" class="btn btn-primary btn-update rounded-1">Update Report</button>
            </form>

            <table class="table sales-table">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Quantity</th>
                  <th>Price</th>
                  <th>Discount Deduction</th>
                  <th>Total Amount</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                {% for sale in sales_data %}
                  <tr>
                    <td>{{ sale.product }}</td>
                    <td>{{ sale.quantity }}</td>
                    <td>{{ sale.price }}</td>
                    <td>{{ sale.discount_deduction }}</td>
                    <td>{{ sale.total_amount }}</td>
                    <td>{{ sale.date }}</td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="8" class="no-data">No sales data available.</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="download-report-section">
            <h2>Download Report</h2>
            <form method="post" action="" class="download-report-form">
              {% csrf_token %}
              <label for="report_format">Format:</label>
              <select name="report_format" id="report_format" class="form-control">
                <option value="pdf">PDF</option>
                <option value="excel">Excel</option>
              </select>
              <button type="submit" class="btn btn-success btn-download">Download Report</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
